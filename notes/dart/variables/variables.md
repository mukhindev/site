---
date: 2025-05-17 10:00 +2
title: Переменные
description: Быстро поговорим про переменные Dart.
tags:
    - dart
---

# Переменные

## Переменные через аннотацию типа

Объявление переменной через явную аннотацию типа.
Если не используется ключевых слов `const` или `final`,
получаем переменную, которую можно переопределить (`var`).

```dart _code/variables.dart:2-7
  // Объявление переменной через явную аннотацию типа
  int foo = 42;
  // Присвоение нового значения
  foo = 43;
  // ❌ Переменной нельзя присвоить значение другого типа
  foo = "text"; // Ошибка
```

## `var`

Объявление переменной через ключевое слово `var`. Тип будет выведен.
Как в примере выше, значение можно переопределить значением того же типа.

```dart _code/variables.dart:9-10
  // Объявление переменной через ключевое слово var. Тип будет выведен.
  var bar = 42;
```

## `const`

В отличие от JavaScript, у `const` в Dart другое назначение.
Это определение константы времени компиляции (compile-time constant).
Значение для данной константы будет получено на этапе компиляции.

```dart _code/variables.dart:12-21
  // const означает константу времени компиляции (compile-time constant).
  const list1 = [1, 2, 3];
  const list2 = [1, 2, 3];
  // Два одинаковых объекта по ссылке
  print(identical(list1, list2)); // true

  // Ещё вариант использования const
  List<int> list5 = const [1, 2, 3];
  List<int> list6 = const [1, 2, 3];
  print(identical(list5, list6)); // true
```

## `final`

А вот `final` уже ближе к смыслу `const` из JavaScript.
Значение нельзя будет переопределить после инициализации.

```dart _code/variables.dart:23-27
  // Не используем const
  final list3 = [1, 2, 3];
  final list4 = [1, 2, 3];
  // Это 2 разных объекта
  print(identical(list3, list4)); // false
```

Причём сама инициализация может быть произведена позже,
что похоже на поведение `let` в JavaScript.
Но не раньше использования. А обычно сразу же.

```dart _code/variables.dart:29-33
  // Инициализация final может быть произведена позже, но обычно почти сразу
  final x;
  // ❌ Нельзя обратиться, ещё не инициализирована
  print(x); // Ошибка
  x = 1;
```

## `late`

Для по настоящему отложенных инициализаций есть `late`.
Даже вызов функции, возвращающей значение для такой переменной,
будет отложен до момента первого использования (lazy initialization).

```dart _code/late.dart
Future<void> main() async {
  // Инициализация переменной произойдёт только в момент первого использования
  late final result = getResult();
  print('Вывод 1');
  // Задержка 2 секунды
  await Future.delayed(Duration(seconds: 2));
  // Использование переменной
  print(result);
}

String getResult() {
  print('Вывод 2');
  return 'result';
}
```

## `_` wildcard

Переменная с именем `_` в Dart называется _wildcard_.
Служит как заполнитель необязательных переменных и параметров.
В отличие от JavaScript, где `_` просто является допустимым именем переменной, в Dart можно использовать несколько `_`
в одном пространстве имён.

```dart
main() {
  // Например, в деструктуризации
  var positions = <int>[10, 50, 0];
  var [_, y, _] = positions;
}
```

## Явная аннотация vs вывод типа

Рекомендация от Google, использовать вывод типа там, где он очевиден:

```dart
// Здесь очевидно целое число `int`
var foo = 42; 
```

И явную аннотацию, где это не очевидно:

```dart
// Здесь не понятно, getToken вернёт строку или другую модель токена
String token = getToken();
```
